<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# config

```go
import "diskmon/internal/config"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func New\(\) \(Cnf, error\)](<#New>)
- [type Alerting](<#Alerting>)
- [type Cgroups](<#Cgroups>)
- [type Cnf](<#Cnf>)
  - [func \(c \*Cnf\) Watch\(ctx context.Context\) error](<#Cnf.Watch>)
- [type Config](<#Config>)
- [type ConfigError](<#ConfigError>)
  - [func \(c \*ConfigError\) Error\(\) string](<#ConfigError.Error>)
- [type EBPF](<#EBPF>)
- [type EBPFProgram](<#EBPFProgram>)
- [type EmailConfig](<#EmailConfig>)
- [type General](<#General>)
- [type Monitoring](<#Monitoring>)
- [type Prometheus](<#Prometheus>)
- [type SlackConfig](<#SlackConfig>)


## Constants

<a name="CENV"></a>

```go
const (
    CENV = "CONF_PATH"
)
```

## Variables

<a name="ErrConfEnvNotExists"></a>

```go
var (
    ErrConfEnvNotExists error = errors.New("config environment not exists")
)
```

<a name="New"></a>
## func [New](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L129>)

```go
func New() (Cnf, error)
```

New return new config instance

Returns:

```
config instance
```

Example:

```
cnf, err := config.New()
```

<a name="Alerting"></a>
## type [Alerting](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L89-L95>)

Alerting contains alert notification settings

```go
type Alerting struct {
    DiskLatencyThresholdMS int         `yaml:"disk_latency_threshold_ms"` // defines alert threshold in milliseconds
    IOPSThreshold          int         `yaml:"iops_threshold"`            // defines maximum IO operations per second
    NotifyMethods          []string    `yaml:"notify_methods"`            // lists enabled notification methods
    Slack                  SlackConfig `yaml:"slack"`                     // contains Slack integration settings
    Email                  EmailConfig `yaml:"email"`                     // contains email notification settings
}
```

<a name="Cgroups"></a>
## type [Cgroups](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L83-L86>)

Cgroups contains control groups configuration

```go
type Cgroups struct {
    BasePath      string `yaml:"base_path"`      // specifies the path to cgroups v2 filesystem
    DefaultWeight int    `yaml:"default_weight"` // defines the default I/O weight (1-100)
}
```

<a name="Cnf"></a>
## type [Cnf](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L118>)

Cnf config struct

```go
type Cnf struct{ atomic.Value }
```

<a name="Cnf.Watch"></a>
### func \(\*Cnf\) [Watch](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L188>)

```go
func (c *Cnf) Watch(ctx context.Context) error
```

Watch start live reload config file. If context will done \- watcher will close

Receiver:

```
Cnf
```

Parameters:

```
ctx - context
```

Returns:

```
error - error
```

Example:

```
ctx := context.Background()
defer ctx.Done()
err = cnf.Watch(ctx)
```

<a name="Config"></a>
## type [Config](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L47-L54>)

Config represents the root configuration structure. For development, configs/config.yaml is used. For production in Docker, /etc/diskmon/config.yaml is mounted.

```go
type Config struct {
    General    General    `yaml:"general"`    // common application settings
    Monitoring Monitoring `yaml:"monitoring"` // system monitoring configuration
    EBPF       EBPF       `yaml:"ebpf"`       // eBPF monitoring configuration
    Cgroups    Cgroups    `yaml:"cgroups"`    // control groups configuration
    Alerting   Alerting   `yaml:"alerting"`   // alert notification settings
    Prometheus Prometheus `yaml:"prometheus"` // metrics export settings
}
```

<a name="ConfigError"></a>
## type [ConfigError](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L29-L32>)

ConfigError struct fot custom errors

```go
type ConfigError struct {
    // contains filtered or unexported fields
}
```

<a name="ConfigError.Error"></a>
### func \(\*ConfigError\) [Error](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L35>)

```go
func (c *ConfigError) Error() string
```

Error satisfy the error interface condition

<a name="EBPF"></a>
## type [EBPF](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L70-L73>)

EBPF contains eBPF monitoring configuration

```go
type EBPF struct {
    Enabled  bool          `yaml:"e_enabled"` // turns eBPF monitoring on/off
    Programs []EBPFProgram `yaml:"programs"`  //  eBPF programs to load
}
```

<a name="EBPFProgram"></a>
## type [EBPFProgram](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L76-L80>)

EBPFProgram defines a single eBPF program configuration

```go
type EBPFProgram struct {
    Name      string `yaml:"name"`       // identifies the eBPF program
    ProbeType string `yaml:"probe_type"` // specifies the attachment type (kprobe/tracepoint)
    Target    string `yaml:"target"`     // specifies the system call to monitor
}
```

<a name="EmailConfig"></a>
## type [EmailConfig](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L104-L108>)

EmailConfig contains SMTP notification settings

```go
type EmailConfig struct {
    SMTPServer string `yaml:"smtp_server"` // specifies the SMTP server address
    From       string `yaml:"from"`        // defines the sender email address
    To         string `yaml:"to"`          // specifies the recipient email address
}
```

<a name="General"></a>
## type [General](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L57-L61>)

General contains common application settings

```go
type General struct {
    LogLevel string `yaml:"log_level"` // defines the logging verbosity (debug/info/warn/error)
    HTTPPort int    `yaml:"http_port"` // specifies the port for REST API server
    GRPCPort int    `yaml:"grpc_port"` // specifies the port for gRPC server
}
```

<a name="Monitoring"></a>
## type [Monitoring](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L64-L67>)

Monitoring contains system monitoring configuration

```go
type Monitoring struct {
    Interval string `yaml:"interval"`  // defines metrics collection frequency (e.g., "5s")
    ProcPath string `yaml:"proc_path"` //specifies the path to proc filesystem (for testing)
}
```

<a name="Prometheus"></a>
## type [Prometheus](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L111-L115>)

Prometheus contains metrics export settings

```go
type Prometheus struct {
    Enabled  bool   `yaml:"p_enabled"` // turns Prometheus metrics export on/off
    Endpoint string `yaml:"endpoint"`  // specifies the metrics HTTP endpoint
    Port     int    `yaml:"port"`      // defines the Prometheus exporter port
}
```

<a name="SlackConfig"></a>
## type [SlackConfig](<https://github.com/alekslesik/diskmon/blob/main/internal/config/config.go#L98-L101>)

SlackConfig contains Slack webhook settings

```go
type SlackConfig struct {
    WebhookURL string `yaml:"webhook_url"` // specifies the Slack incoming webhook URL
    Channel    string `yaml:"channel"`     // defines the target Slack channel for alerts
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
